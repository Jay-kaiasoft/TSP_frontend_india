                        String stateName = companyEmployee.getState();
                        Optional<Map<String, Object>> matchedRule = Constants.PT_RULES.stream()
                                .filter(rule -> rule.get("state").toString().equalsIgnoreCase(stateName))
                                .findFirst();

                        Calendar calendar = Calendar.getInstance();
                        boolean isFebruary = calendar.get(Calendar.MONTH) == Calendar.FEBRUARY;

                        if (matchedRule.isPresent()) {
                            Map<String, Object> rule = matchedRule.get();

                            Float hourlyRate = companyEmployee.getHourlyRate();
                            Float totalHours = companyEmployee.getCompanyShift().getTotalHours();
                            Integer monthDays = month == 1 ? 30 : month == 3 ? 90 : month == 6 ? 180 : 360;
                            Float monthlySalary = hourlyRate * totalHours * monthDays;
                            System.out.println("============ monthlySalary ========"+hourlyRate +"*"+totalHours +"*"+ month+"===="+hourlyRate * totalHours * month);
                            res.put("gross_salary", monthlySalary);

                            Integer ptAmountFromRule = (Integer) rule.get("ptPerMonth");

                            int ptAmount = 0;
                            String ptSlabApplied = "Not Applicable";

                            if (companyEmployee.getGender().equals("Male")) {
                                if (monthlySalary <= 7500) {
                                    ptAmount = 0;
                                    ptSlabApplied = "Up to ₹7,500 (Male)";
                                } else if (monthlySalary > 7500 && monthlySalary <= 10000) {
                                    ptAmount = ptAmountFromRule;
                                    ptSlabApplied = "₹7,501 to ₹10,000 (Male)";
                                } else {
                                    ptAmount = isFebruary ? 300 : ptAmountFromRule;
                                    ptSlabApplied = "Above ₹10,000 (Male)";
                                }
                            } else if (companyEmployee.getGender().equals("Female")) {
                                if (monthlySalary <= 25000) {
                                    ptAmount = 0;
                                    ptSlabApplied = "Up to ₹25,000 (Female)";
                                } else { // monthlySalary > 25000
                                    ptAmount = isFebruary ? 300 : ptAmountFromRule; // Apply February rule
                                    ptSlabApplied = "Above ₹25,000 (Female)";
                                }
                            } else {
                                ptAmount = 0;
                                ptSlabApplied = "Not Applicable (Gender not specified or rule not found)";
                            }

                            res.put("pt_amount", ptAmount);
                            res.put("pt_slab_applied", ptSlabApplied);

                        } else {
                            res.put("pt_amount", 0);
                            res.put("pt_slab_applied", "PT not applicable for this state or no rule found");
                        }